# Chat App Frontend

Next.js ê¸°ë°˜ì˜ ì‹¤ì‹œê°„ ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë¡ íŠ¸ì—”ë“œì…ë‹ˆë‹¤.

## ê¸°ìˆ  ìŠ¤íƒ

- **Framework**: Next.js 15.0.2
- **UI Library**: React 18.3.1
- **Styling**: Tailwind CSS 4.0, Vapor UI Design System
- **Real-time Communication**: Socket.IO Client 4.7.2

## ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Node.js 18.x ì´ìƒ
- npm ë˜ëŠ” yarn

## ì„¤ì¹˜ ë° ì‹¤í–‰
 
### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env.example` íŒŒì¼ì„ ì°¸ê³ í•˜ì—¬ `.env.local` íŒŒì¼ì„ ìƒì„±í•©ë‹ˆë‹¤:

```bash
cp .env.example .env.local
```

`.env.local` íŒŒì¼ ë‚´ìš©:

```env
NEXT_PUBLIC_API_URL=http://localhost:5001
NEXT_PUBLIC_SOCKET_URL=http://localhost:5002
```

**í™˜ê²½ ë³€ìˆ˜ ì„¤ëª…:**
- `NEXT_PUBLIC_API_URL`: ë°±ì—”ë“œ REST API ì„œë²„ ì£¼ì†Œ
- `NEXT_PUBLIC_SOCKET_URL`: Socket.IO ì„œë²„ ì£¼ì†Œ

> ğŸ” **ì¸ì¦**: ë°±ì—”ë“œëŠ” JWT í† í°ë§Œì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¡œê·¸ì¸/íšŒì›ê°€ì… ì‘ë‹µì—ëŠ” ë” ì´ìƒ `sessionId`ê°€ í¬í•¨ë˜ì§€ ì•Šìœ¼ë©°, ëª¨ë“  API ë° Socket.IO ìš”ì²­ì€ `Authorization` ë˜ëŠ” `x-auth-token` í—¤ë”ë§Œ ì„¤ì •í•˜ë©´ ë©ë‹ˆë‹¤.

ì„œë²„í™˜ê²½ì—ì„œ ì‹¤í–‰ì‹œ Route 53 ì— ë“±ë¡í•œ ë„ë©”ì¸ì„ ì…ë ¥í•˜ì„¸ìš”. ì˜ˆ: `https://chat.goorm-ktb-[ë²ˆí˜¸].goorm.team`

### 3. ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
npm run dev
```

ê°œë°œ ì„œë²„ê°€ [http://localhost:3000](http://localhost:3000)ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 4. í”„ë¡œë•ì…˜ ë¹Œë“œ

```bash
# ë¹Œë“œ
npm run build

# í”„ë¡œë•ì…˜ ì„œë²„ ì‹¤í–‰
npm run start
```

## ë¹Œë“œ ë° ë°°í¬

### Makefileì„ ì‚¬ìš©í•œ ë°°í¬

í”„ë¡œì íŠ¸ëŠ” `Makefile`ì„ í†µí•´ ë¹Œë“œ ë° ë°°í¬ë¥¼ ìë™í™”í•©ë‹ˆë‹¤.

#### ë¡œì»¬ ë¹Œë“œ

ë¡œì»¬ì—ì„œ í”„ë¡œë•ì…˜ ë¹Œë“œë¥¼ ìƒì„±í•©ë‹ˆë‹¤:

```bash
make build-local
```

ì´ ëª…ë ¹ì€ ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤:
- `npm run build:production` ì‹¤í–‰
- Next.js standalone ë¹Œë“œ ìƒì„±

#### ì›ê²© ì„œë²„ ë°°í¬

ë¹Œë“œëœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì›ê²© ì„œë²„ì— ë°°í¬í•©ë‹ˆë‹¤:

```bash
make deploy
```

**ê¸°ë³¸ ì„¤ì •:**
- ë°°í¬ ëŒ€ìƒ ì„œë²„: `ktb-fe01`
- ë°°í¬ ê²½ë¡œ: `/home/ubuntu/ktb-chat-frontend`

**ì»¤ìŠ¤í…€ ë°°í¬ ì„¤ì •:**

```bash
# ì—¬ëŸ¬ ì„œë²„ì— ë™ì‹œ ë°°í¬
make deploy DEPLOY_SERVERS="ktb-fe01 ktb-fe02 ktb-fe03"

# ë‹¤ë¥¸ ê²½ë¡œì— ë°°í¬
make deploy DEPLOY_PATH=/opt/ktb-chat-frontend


## Dockerë¡œ ì‹¤í–‰

### Docker ì´ë¯¸ì§€ ë¹Œë“œ

```bash
docker build -t chat-app-frontend .
```

> **ì°¸ê³ **: `NEXT_PUBLIC_*` í™˜ê²½ ë³€ìˆ˜ëŠ” ë¹Œë“œ ì‹œì ì— ì½”ë“œì— ì¸ë¼ì¸ë©ë‹ˆë‹¤.
> - ë¡œì»¬ ê°œë°œ: `.env.local` íŒŒì¼ ì‚¬ìš©
> - í”„ë¡œë•ì…˜: `.env.production` íŒŒì¼ ì‚¬ìš©
>
> ë‹¤ë¥¸ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ë¹Œë“œ ì „ì— `.env.production` íŒŒì¼ì„ ìˆ˜ì •í•˜ì„¸ìš”.

### Docker ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```bash
docker run -p 3000:3000 chat-app-frontend
```

ë˜ëŠ” docker-compose ì‚¬ìš© ì‹œ:

```bash
docker-compose up
```

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
frontend/
â”œâ”€â”€ components/        # ì¬ì‚¬ìš© ê°€ëŠ¥í•œ React ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ ChatHeader.js
â”‚   â”œâ”€â”€ ChatInput.js
â”‚   â”œâ”€â”€ ChatMessages.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ contexts/          # React Context (ì „ì—­ ìƒíƒœ)
â”‚   â””â”€â”€ AuthContext.js
â”œâ”€â”€ hooks/             # ì»¤ìŠ¤í…€ React í›…
â”‚   â”œâ”€â”€ useChatRoom.js
â”‚   â”œâ”€â”€ useSocketHandling.js
â”‚   â””â”€â”€ ...
â”œâ”€â”€ pages/             # Next.js í˜ì´ì§€ (ë¼ìš°íŒ…)
â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”œâ”€â”€ [room].js  # ë™ì  ì±„íŒ…ë°© í˜ì´ì§€
â”‚   â”‚   â”œâ”€â”€ index.js   # ì±„íŒ…ë°© ëª©ë¡
â”‚   â”‚   â””â”€â”€ new.js     # ìƒˆ ì±„íŒ…ë°© ìƒì„±
â”‚   â”œâ”€â”€ index.js       # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â”œâ”€â”€ register.js    # íšŒì›ê°€ì… í˜ì´ì§€
â”‚   â””â”€â”€ profile.js     # í”„ë¡œí•„ í˜ì´ì§€
â”œâ”€â”€ public/            # ì •ì  íŒŒì¼
â”‚   â””â”€â”€ images/
â”œâ”€â”€ services/          # API ë° ì™¸ë¶€ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ authService.js
â”‚   â”œâ”€â”€ fileService.js
â”‚   â””â”€â”€ socket.js
â”œâ”€â”€ styles/            # ì „ì—­ ìŠ¤íƒ€ì¼
â”‚   â””â”€â”€ globals.css
â””â”€â”€ utils/             # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
    â””â”€â”€ colorUtils.js
```

## ì£¼ìš” ê¸°ëŠ¥

- **ì‹¤ì‹œê°„ ì±„íŒ…**: Socket.IOë¥¼ í†µí•œ ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì†¡ìˆ˜ì‹ 
- **íŒŒì¼ ê³µìœ **: ì´ë¯¸ì§€ ë° íŒŒì¼ ì—…ë¡œë“œ/ë‹¤ìš´ë¡œë“œ
- **ì´ëª¨ì§€ ë°˜ì‘**: ë©”ì‹œì§€ì— ì´ëª¨ì§€ ë°˜ì‘ ì¶”ê°€
- **ë©˜ì…˜ ê¸°ëŠ¥**: @usernameìœ¼ë¡œ ì‚¬ìš©ì ë©˜ì…˜
- **ì½ìŒ ìƒíƒœ**: ë©”ì‹œì§€ ì½ìŒ/ì•ˆ ì½ìŒ í‘œì‹œ
- **í”„ë¡œí•„ ê´€ë¦¬**: ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ ë° ì •ë³´ ìˆ˜ì •
- **ì±„íŒ…ë°© ê´€ë¦¬**: ì±„íŒ…ë°© ìƒì„±, ì°¸ì—¬, ë‚˜ê°€ê¸°

## í˜ì´ì§€ ë¼ìš°íŒ…

- `/` - ë¡œê·¸ì¸ í˜ì´ì§€
- `/register` - íšŒì›ê°€ì…
- `/profile` - ì‚¬ìš©ì í”„ë¡œí•„
- `/chat` - ì±„íŒ…ë°© ëª©ë¡
- `/chat/new` - ìƒˆ ì±„íŒ…ë°© ìƒì„±
- `/chat/[room]` - ê°œë³„ ì±„íŒ…ë°© (ë™ì  ë¼ìš°íŒ…)
